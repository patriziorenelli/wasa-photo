tags:
  - name: "doLogin"
    description: "Logs in the user"
  - name: "setMyUserName"
    description: "Set Username of User selected by his id "
  - name: "followUser"
    description: "Follow another user"  
 
openapi: 3.0.0

info: 
  title: WasaPhoto
  description:  | 
    This API allows you to manage the
    data available in the project
  version: 0.0.1
servers:
  - url: "http://localhost:3000"
  
paths: 
  /session:
    post:
      tags: ["doLogin"]
      summary: Logs in the user
      description: |-
        If the user does not exist, it will be created,
        and an identifier is returned.
        If the user exists, the user identifier is returned.
      operationId: doLogin
      requestBody:
        description: User details
        content:
          application/json:
            schema:
              type: object
              description: "Oggetto"
              properties:
                name:
                  type: string
                  example: Maria
                  pattern: 'Ë†.*?$'
                  minLength: 6
                  maxLength: 16
        required: true
      responses: 
        '200':
          description: User log-in action successful
          content:
            application/json:
              schema:
                type: object
                description: "User log-in action successful"
                properties:
                  identifier:
                    # change here if you decide to use an integer
                    # or any other type of identifier
                    type: string
                    example: "abcdef012345"
  
  /{userId}/setMyUserName/{newUsername}:
    post:
          tags: ["setMyUserName"]
          summary: Set Username of User selected by his id 
          description: |
            If the user does not exist, error is returned.
            If the user exists, his username is changed.
          operationId: setMyUserName
          parameters: 
            - in: path
              name: userId
              required: true
              schema:
                type: string
                description: "User Id"
                minLength: 6
                maxLength: 16
            - in: path
              name: newUsername
              required: true
              schema:
                type: string
                description: "New UserName"
                minLength: 6
                maxLength: 16                
                

          responses: 
            '200':
              description: Success 
              content: 
                application/json:
                  schema:
                    type: array
                    description: "Return if UserName is changed"
                    items:
                      properties: 
                        UserId: 
                          type: integer
                          example: 200
                        UserNick:
                          type: string
                          example: UserName changed
                    minItems: 1
                    maxItems: 1
            '400':
              description: Userid not found  
              content: 
                application/json:
                  schema:
                    type: array
                    description: "Return if UserName is Not changed"
                    items:
                      properties: 
                        UserId: 
                          type: integer
                          example: 400
                        UserNick:
                          type: string
                          example: UserName NOT changed
                    minItems: 1
                    maxItems: 1

  /followUser/{userId1}/-/{userId2}:
    post:
          tags: ["followUser"]
          summary: Follow another user
          description: |
            If the user identified by userId2 does not exist, error is returned.
            If the user identified by userId2 exists, user identified by userId follow user identified by userId2 if user2 hasn't banned him.
          operationId: followUser
          parameters: 
            - in: path
              name: userId1
              required: true
              schema:
                type: string
                description: "First UserId"
                minLength: 6
                maxLength: 16                
            - in: path
              name: userId2
              required: true
              schema:
                type: string
                description: "Second UserId"
                minLength: 6
                maxLength: 16                
          responses: 
            '200':
              description: Success 
              content: 
                application/json:
                  schema:
                    type: array
                    description: "Return if the following is successful"
                    items:
                      properties: 
                        UserId: 
                          type: integer
                          example: 200
                        UserNick:
                          type: string
                          example: Now follow the user Marco.
                    minItems: 1
                    maxItems: 1
           
            '400':
              description: Userid not found  
              content: 
                application/json:
                  schema:
                    type: array
                    description: "Return if UserId is NOT found"
                    items:
                      properties: 
                        UserId: 
                          type: integer
                          example: 400
                        UserNick:
                          type: string
                          example: Userid not found.
                    minItems: 1
                    maxItems: 1                         
            '403':
              description: Userid banned  
              content: 
                application/json:
                  schema:
                    type: array
                    description: "Return if User2 banned User1"
                    items:
                      properties: 
                        UserId: 
                          type: integer
                          example: 403
                        UserNick:
                          type: string
                          example: Sorry,Maria banned you. You can not follow her.
                    minItems: 1
                    maxItems: 1
            '404':
              description: Userid2 not found  
              content: 
                application/json:
                  schema:
                    type: array
                    description: "Return if UserId2 is NOT found"
                    items:
                      properties: 
                        UserId: 
                          type: integer
                          example: 404
                        UserNick:
                          type: string
                          example: Userid2 not found.
                    minItems: 1
                    maxItems: 1                        
            '500':
              description: Error server execution  
              content: 
                application/json:
                  schema:
                    type: array
                    description: "Error server execution"
                    items:
                      properties: 
                        UserId: 
                          type: integer
                          example: 500
                        UserNick:
                          type: string
                          example: Error server execution.
                    minItems: 1
                    maxItems: 1                          
